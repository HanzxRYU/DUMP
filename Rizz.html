<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Nunito", sans-serif;
      }
      .custom-checkbox {
        appearance: none;
        background-color: #fff;
        border: 2px solid #000;
        padding: 10px;
        display: inline-block;
        position: relative;
      }
      .custom-checkbox:checked {
        background-color: #444; /* Darker background when checked */
      }
      .custom-checkbox:checked::after {
        content: "\2713";
        font-size: 16px;
        color: #fff;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .history-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border: 1px solid #ccc;
        margin-top: 5px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body
    class="bg-yellow-500 flex flex-col items-center justify-center min-h-screen"
  >
    <div class="text-center">
      <h1 class="text-4xl font-bold mb-2">
        To-Do List <i class="fas fa-clock"></i>
      </h1>
      <p class="text-xl mb-6">Gerak bro, kalau gak gerak gay</p>
    </div>
    <div class="relative mb-6">
      <input
        type="text"
        id="task-input"
        placeholder="Silahkan buat plan mu disini"
        class="border-2 border-black rounded-lg py-2 px-4 w-96 text-center"
      />
      <i
        class="fas fa-clock absolute top-1/2 right-0 transform -translate-y-1/2 mr-4"
      ></i>
    </div>
    <div class="bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-4xl">
      <h2 class="text-lg font-bold mb-4">Inbox:</h2>
      <div
        id="task-list"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
      ></div>
      <p id="empty-message" class="text-center text-gray-500 mt-4 hidden">
        Inbox Kosong, silahkan tambah tugas
      </p>
    </div>
    <div class="bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-4xl mt-6">
      <h2 class="text-lg font-bold mb-4">Riwayat Tugas:</h2>
      <div id="history-list" class="flex flex-col"></div>
    </div>
    <p id="empty-history-message" class="text-center text-gray-500 mt-4 hidden">
      Riwayat kosong, silahkan selesaikan tugas
    </p>
    <script>
      const taskInput = document.getElementById("task-input");
      const taskList = document.getElementById("task-list");
      const emptyMessage = document.getElementById("empty-message");
      const historyList = document.getElementById("history-list");
      const emptyHistoryMessage = document.getElementById(
        "empty-history-message"
      );

      let tasks = [];
      let completedTasks = [];

      function addTask() {
        const taskText = taskInput.value.trim();
        if (taskText) {
          const task = {
            text: taskText,
            timestamp: new Date().toLocaleString(),
          };
          tasks.push(task);
          taskInput.value = "";
          renderTaskList();
        }
      }

      taskInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
          addTask();
        }
      });

      function renderTaskList() {
        taskList.innerHTML = "";
        if (tasks.length === 0) {
          emptyMessage.classList.remove("hidden");
        } else {
          emptyMessage.classList.add("hidden");
          tasks.forEach((task, index) => {
            const taskElement = document.createElement("div");
            taskElement.className =
              "flex items-center p-4 border-2 border-gray-300 rounded-lg shadow-md";
            taskElement.innerHTML = `
              <input type="checkbox" class="custom-checkbox mr-2" onchange="markTaskAsCompleted(${index})" />
              <div>
                <span class="font-bold">${task.text}</span>
                <p class="text-sm">${task.timestamp}</p>
              </div>
              <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-24 ml-4" onclick="moveToHistory(${index})">Hapus</button>
            `;
            taskList.appendChild(taskElement);
          });
        }
      }

      function markTaskAsCompleted(index) {
        const task = tasks[index];
        if (task) {
          task.completed = !task.completed; // Toggle completion status
        }
      }

      function moveToHistory(index) {
        const task = tasks.splice(index, 1)[0];
        completedTasks.push(task);
        renderTaskList();
        renderHistoryList();
      }

      function renderHistoryList() {
        historyList.innerHTML = "";
        if (completedTasks.length === 0) {
          emptyHistoryMessage.classList.remove("hidden");
        } else {
          emptyHistoryMessage.classList.add("hidden");
          completedTasks.forEach((task, index) => {
            const historyItem = document.createElement("div");
            historyItem.className = "history-item";
            historyItem.innerHTML = `
              <span class="font-bold">${task.text}</span>
              <p class="text-sm">${task.timestamp}</p>
              <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-24 ml-4" onclick="deleteHistory(${index})">Hapus</button>
            `;
            historyList.appendChild(historyItem);
          });
        }
      }

      function deleteHistory(index) {
        completedTasks.splice(index, 1);
        renderHistoryList();
      }
    </script>
  </body>
</html>
